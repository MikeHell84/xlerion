import{m as l}from"./alpine-l7QTk8p_.js";import{a}from"./axios-D5GkNzM3.js";const s={auctions:[],currentAuction:null,bids:[],loading:!1,error:null,pollInterval:null,async fetchAuctions(t={}){var e,o;this.loading=!0;try{const{data:n}=await a.get("/api/auctions",{params:t});this.auctions=n.data||n,this.error=null}catch(n){this.error=((o=(e=n.response)==null?void 0:e.data)==null?void 0:o.message)||"Error fetching auctions",console.error("Auction fetch error:",n)}finally{this.loading=!1}},async fetchAuctionDetail(t){var e,o;this.loading=!0;try{const{data:n}=await a.get(`/api/auctions/${t}`);this.currentAuction=n.data||n,this.bids=n.bids||[],this.error=null}catch(n){this.error=((o=(e=n.response)==null?void 0:e.data)==null?void 0:o.message)||"Error fetching auction details",console.error("Auction detail error:",n)}finally{this.loading=!1}},async placeBid(t,e){var o,n;try{const{data:i}=await a.post(`/api/auctions/${t}/bids`,{amount:parseFloat(e)});return this.currentAuction=i.data||i,this.bids=i.bids||[],{success:!0,data:i}}catch(i){const r=((n=(o=i.response)==null?void 0:o.data)==null?void 0:n.message)||"Error placing bid";return this.error=r,{success:!1,error:r}}},startPolling(t,e=5e3){this.pollInterval&&clearInterval(this.pollInterval),this.pollInterval=setInterval(()=>this.fetchAuctionDetail(t),e)},stopPolling(){this.pollInterval&&(clearInterval(this.pollInterval),this.pollInterval=null)}},c=(t,e=5e3)=>(s.startPolling(t,e),()=>s.stopPolling()),u={show(t,e="info",o=3e3){const n=document.getElementById("toast-container")||this.createContainer(),i=document.createElement("div"),r={success:"bg-green-600",error:"bg-red-600",warning:"bg-yellow-600",info:"bg-blue-600"}[e]||"bg-blue-600";i.className=`${r} text-white px-6 py-3 rounded-lg shadow-lg animate-fade-in mb-2`,i.textContent=t,n.appendChild(i),setTimeout(()=>i.remove(),o)},createContainer(){const t=document.createElement("div");return t.id="toast-container",t.className="fixed top-4 right-4 z-50 max-w-md",document.body.appendChild(t),t},success(t,e){this.show(t,"success",e)},error(t,e){this.show(t,"error",e)},warning(t,e){this.show(t,"warning",e)},info(t,e){this.show(t,"info",e)}};window.Alpine=l;window.initAuctionPolling=c;window.notificationService=u;l.start();
